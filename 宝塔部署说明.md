# Next.js 项目宝塔部署说明

## 问题原因
宝塔部署后样式丢失的主要原因是静态资源路径问题。Next.js 默认使用 `/_next/static/` 路径，在宝塔环境中可能无法正确访问。

## 解决方案

### 1. 项目配置已修复
- 已更新 `next.config.js` 配置
- 确保静态资源路径正确

### 2. 宝塔部署步骤

#### 方法一：Node.js 项目部署（推荐）
1. 在宝塔面板中创建 Node.js 项目
2. 上传项目文件到网站目录
3. 安装依赖：`pnpm install`
4. 构建项目：`pnpm build`
5. 启动项目：`pnpm start`
6. 配置反向代理到 3000 端口

#### 方法二：静态文件部署
1. 构建项目：`pnpm build`
2. 将以下文件上传到宝塔网站根目录：
   - `.next/` 目录（整个目录）
   - `package.json`
   - `next.config.js`
3. 在宝塔中配置 Node.js 环境
4. 运行：`pnpm start`

### 3. 重要文件说明

#### 必须上传的文件/目录：
```
项目根目录/
├── .next/                    # 构建产物（重要！）
│   ├── static/              # 静态资源
│   │   ├── css/            # 样式文件
│   │   ├── chunks/         # JavaScript 文件
│   │   └── media/          # 字体等媒体文件
│   └── server/             # 服务端文件
├── package.json             # 依赖配置
├── next.config.js          # Next.js 配置
└── node_modules/           # 依赖包（或通过 pnpm install 安装）
```

#### 关键配置：
- 确保 `.next/static/` 目录可以正常访问
- 检查 CSS 文件路径：`/_next/static/css/4101660af177ead1.css`
- 检查 JS 文件路径：`/_next/static/chunks/...`

### 4. 验证部署
访问网站后，检查浏览器开发者工具：
1. Network 标签页查看资源加载情况
2. 确认 CSS 和 JS 文件都返回 200 状态码
3. 检查控制台是否有 404 错误

### 5. 常见问题
- **样式丢失**：检查 `.next/static/css/` 目录是否正确上传
- **功能异常**：检查 `.next/static/chunks/` 目录是否正确上传
- **字体问题**：检查 `.next/static/media/` 目录是否正确上传

## 注意事项
- 确保宝塔服务器已安装 Node.js 和 pnpm
- 确保 `.next` 目录有正确的读取权限
- 建议使用 PM2 管理 Node.js 进程
